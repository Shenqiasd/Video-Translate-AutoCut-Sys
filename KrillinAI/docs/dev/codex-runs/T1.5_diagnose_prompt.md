# Codex Task T1.5: Enhance --diagnose (writability + paths + deps summary)

Repo: `Video-Translate-AutoCut-Sys/KrillinAI`
Branch: `feat/desktop-native-step1-appcore`

## Goal

Improve Windows desktop `--diagnose` so it becomes a one-command support bundle.

## Requirements

- Print effective paths resolved by `internal/appdirs`:
  - portable_mode
  - config_dir, config_file
  - log_dir, log_file
  - output_dir, task_root
  - cache_dir, db_file
- Add writability checks for each directory:
  - attempt `os.MkdirAll(dir)`
  - create a temp file within each dir (or open a test file) and delete it
  - print `ok`/`error` with reason
- Add dependency summary (best-effort, no downloads):
  - ffmpeg, ffprobe, yt-dlp, edge-tts paths
  - if not initialized, print `unknown` (avoid crashing)
  - optionally integrate existing deps checker in a safe mode if available

## Files

- `cmd/desktop/flags.go` (diagnose)
- Path helpers created in T1.4: `internal/appdirs/runtime_paths.go` (use these)
- `internal/deps/checker.go` (if needed for discovery only)
- Add/adjust tests: `cmd/desktop/flags_test.go`

## Validation

- `go test ./...` passes
- `codex run log` is saved
